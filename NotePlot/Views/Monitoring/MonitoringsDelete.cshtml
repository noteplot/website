@model long

<div class="np-fVrtLayout" id="monitoringDeletePanel">
    <form action='/Monitoring/MonitoringDeleteByDate' method="POST" id="monitoringDelete">
        @Html.AntiForgeryToken()
        <div>
            <p class="input-prepend">
                <label for="DateFrom" class="np_label">C</label>
                <input type="text" name="DateFrom" class="ui-widget ui-widget-content ui-corner-all np-input-date np-date np-ui-input" readonly tabindex="-1">
            </p>
            <p>
                <label for="DateFrom" class="np_label">По</label>
                <input type="text" name="DateTo" class="ui-widget ui-widget-content ui-corner-all np-input-date np-date np-ui-input" readonly tabindex="-1">
            </p>
            <input type="hidden" name="MonitorID" value="@ViewBag.MonitorID"/>
        </div>
    </form>
    <div class="np-buttons">
        <button id="btnOk" class="np-left ui-button ui-corner-all">Да</button>
        <button id="btnCancel" class="np-right ui-button ui-corner-all">Отмена</button>
    </div>
</div>
<script type="text/javascript">
    $(function () {
        $.datepicker.setDefaults($.datepicker.regional['ru']);
        $(".np-input-date").datepicker({
            dateFormat: "dd.mm.yy",
            showOtherMonths: true,
            selectOtherMonths: true,
            changeMonth: true,
            changeYear: true,
            onClose: function () {this.blur();}
            //showOn: "both",
            //buttonImage: "calendar16.png",
            //buttonImageOnly: true,
            //buttonText: "выбрать дату"
        });

        var adata = new Object();
        adata.onSuccess = function (dta) {
            location.reload();
        }

        $('#btnOk').on('click', function (e) {
            e.preventDefault();
            np_AjaxFormInputClick(); // очистка ошибок
            if ($('#monitoringDelete').valid())
                $('#monitoringDelete').submit();
        });

        $('#btnCancel').on('click', function (e) {
            e.preventDefault();
            // Находим диалог и закрываем
            var _md = $('#monitoringDeletePanel').parents('.dialog').first().attr('id');
            if (_md != undefined) {
                $('#' + _md).dialog("close");
            }
        });

        $("#monitoringDelete").bind('submit', adata, np_AjaxFormSubmit);
        $("#monitoringDelete").bind('click', np_AjaxFormInputClick);
        $("#monitoringDelete")
            .validate({
                rules: {
                    DateFrom: {
                        required: true,
                    },
                    DateTo: {
                        required: true,
                    },
                },
                messages: {
                    DateFrom: {
                        required: "поле должно быть заполнено",
                    },
                    DateTo: {
                        required: "поле должно быть заполнено",
                    }
                }
            });
    });
</script>